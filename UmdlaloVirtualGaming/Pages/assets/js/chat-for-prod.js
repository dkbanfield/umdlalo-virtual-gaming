//https://obfuscator.io/
var _0x43727e = _0x2cfe; (function (_0x787ff6, _0x4eedec) { var _0x324ce8 = _0x2cfe, _0x1aab0e = _0x787ff6(); while (!![]) { try { var _0x44ef9a = -parseInt(_0x324ce8(0x145)) / 0x1 * (parseInt(_0x324ce8(0x184)) / 0x2) + parseInt(_0x324ce8(0x157)) / 0x3 + parseInt(_0x324ce8(0x182)) / 0x4 * (-parseInt(_0x324ce8(0x15c)) / 0x5) + -parseInt(_0x324ce8(0x161)) / 0x6 * (parseInt(_0x324ce8(0x173)) / 0x7) + parseInt(_0x324ce8(0x154)) / 0x8 * (-parseInt(_0x324ce8(0x159)) / 0x9) + -parseInt(_0x324ce8(0x165)) / 0xa * (parseInt(_0x324ce8(0x142)) / 0xb) + parseInt(_0x324ce8(0x151)) / 0xc * (parseInt(_0x324ce8(0x194)) / 0xd); if (_0x44ef9a === _0x4eedec) break; else _0x1aab0e['push'](_0x1aab0e['shift']()); } catch (_0x26a03c) { _0x1aab0e['push'](_0x1aab0e['shift']()); } } }(_0x11af, 0x435fc)); var current_chat = { 'panel': null, 'user_id': null, 'course_id': null, 'course_name': null, 'user_name': null, 'limit': 0xa, 'message': null }; function _0x2cfe(_0x1a709c, _0x197443) { var _0x11aff6 = _0x11af(); return _0x2cfe = function (_0x2cfe9a, _0x13c2de) { _0x2cfe9a = _0x2cfe9a - 0x140; var _0x3e0b3e = _0x11aff6[_0x2cfe9a]; return _0x3e0b3e; }, _0x2cfe(_0x1a709c, _0x197443); } function reset_clicked_user_notification(_0x40581c) { var _0x2345c1 = _0x2cfe; $['ajax']({ 'url': _0x2345c1(0x15f), 'method': 'POST', 'data': { [_0x2345c1(0x16c) + _0x40581c + '_notification']: !![], 'course_id': current_chat[_0x2345c1(0x17d)] }, 'success': function (_0x4f6e4f, _0x50cf45) { var _0x211746 = _0x2345c1; console[_0x211746(0x14f)](_0x4f6e4f); }, 'error': function (_0x21f2a4) { var _0x1d08f1 = _0x2345c1; console[_0x1d08f1(0x14f)](_0x21f2a4), alert(_0x1d08f1(0x187)); } }); } function get_notification(_0x55af3b) { $('.' + _0x55af3b + '_chat_user')['each'](function (_0x46bd6d) { var _0x402a91 = _0x2cfe, _0x38111a = $(this)[_0x402a91(0x14c)](_0x402a91(0x143)), _0x42f2b3 = _0x402a91(0x168) + _0x55af3b + _0x402a91(0x18d); $['ajax']({ 'url': _0x402a91(0x15f), 'method': 'POST', 'data': { [_0x42f2b3]: !![], 'course_id': _0x38111a }, 'success': function (_0x3363d7, _0x4ab41c) { var _0x59ba2c = _0x402a91; console[_0x59ba2c(0x14f)](_0x3363d7); var _0xc1abe5 = _0x3363d7['notification'], _0x426173 = _0x3363d7[_0x59ba2c(0x188)], _0x5e0ab5 = $('#' + _0x55af3b + _0x59ba2c(0x17c) + _0x38111a), _0x2cfebf = $('#' + _0x55af3b + _0x59ba2c(0x16e) + _0x38111a); _0x426173 != '' && _0xc1abe5 == '' && (_0x5e0ab5[_0x59ba2c(0x192)](_0x59ba2c(0x18f)), _0x5e0ab5[_0x59ba2c(0x141)]('label-danger'), _0x5e0ab5[_0x59ba2c(0x171)](_0xc1abe5), _0x2cfebf[_0x59ba2c(0x171)](timeDifference(_0x426173))); if (_0x426173 != '' && _0xc1abe5 == '0') _0x5e0ab5[_0x59ba2c(0x192)](_0x59ba2c(0x18f)), _0x5e0ab5[_0x59ba2c(0x141)](_0x59ba2c(0x15d)), _0x5e0ab5[_0x59ba2c(0x171)](_0xc1abe5), _0x2cfebf['text'](timeDifference(_0x426173)); else _0x426173 != '' && _0xc1abe5 != '' && (_0x5e0ab5['removeClass'](_0x59ba2c(0x18f)), _0x5e0ab5[_0x59ba2c(0x192)](_0x59ba2c(0x15d)), _0x5e0ab5[_0x59ba2c(0x171)](_0xc1abe5), _0x2cfebf[_0x59ba2c(0x171)](timeDifference(_0x426173))); }, 'error': function () { var _0x412d3e = _0x402a91; alert(_0x412d3e(0x17b)); } }); }); } function fetch_messages(_0x19f267, _0x5cf24b) { var _0x345fdd = _0x2cfe; $[_0x345fdd(0x155)]({ 'url': 'rest-chat-get', 'method': _0x345fdd(0x14a), 'data': { 'limit': current_chat[_0x345fdd(0x167)], 'course_id': current_chat[_0x345fdd(0x17d)], 'token': _0x5cf24b }, 'success': function (_0x1c3e8e, _0x23fe4a) { var _0x20c278 = _0x345fdd; console[_0x20c278(0x14f)](_0x1c3e8e), $('.' + _0x19f267 + '_chat_header')['html'](current_chat[_0x20c278(0x180)]), $('.' + _0x19f267 + _0x20c278(0x179))[_0x20c278(0x186)](''), _0x1c3e8e[_0x20c278(0x17e)]((_0x279c77, _0x4bdf44) => { var _0x305299 = _0x20c278, _0x3c7ba1 = _0x279c77[_0x305299(0x14b)], _0x12b2a1 = _0x279c77['time'], _0x2f97c1 = _0x279c77[_0x305299(0x169)], _0x4e745b = _0x279c77[_0x305299(0x175)]; _0x1c3e8e[0x0][_0x305299(0x169)][_0x305299(0x14e)]() == current_chat[_0x305299(0x169)][_0x305299(0x14e)]() ? _0x279c77[_0x305299(0x169)] == current_chat[_0x305299(0x169)] ? $('.' + _0x19f267 + '_chat_messages_box')[_0x305299(0x16b)](left_box(_0x3c7ba1, _0x4e745b, _0x12b2a1)) : $('.' + _0x19f267 + _0x305299(0x179))['append'](right_box(_0x3c7ba1, _0x4e745b, _0x12b2a1)) : _0x279c77[_0x305299(0x169)] != current_chat['user_id'] ? $('.' + _0x19f267 + _0x305299(0x179))[_0x305299(0x16b)](left_box(_0x3c7ba1, _0x4e745b, _0x12b2a1)) : $('.' + _0x19f267 + '_chat_messages_box')[_0x305299(0x16b)](right_box(_0x3c7ba1, _0x4e745b, _0x12b2a1)); }); }, 'error': function () { alert('chat\x20fetch\x20error'); } }); } function timeDifference(_0x87e43e) { var _0x7fafe4 = _0x2cfe, _0x53729d = 0x3c * 0x3e8, _0x5cd99f = _0x53729d * 0x3c, _0x5e5679 = _0x5cd99f * 0x18, _0x2e805c = _0x5e5679 * 0x1e, _0x3c3d63 = _0x5e5679 * 0x16d, _0x111aa3 = new Date() - Date[_0x7fafe4(0x193)](_0x87e43e); if (_0x111aa3 < _0x53729d) return Math[_0x7fafe4(0x153)](_0x111aa3 / 0x3e8) + '\x20seconds\x20ago'; else { if (_0x111aa3 < _0x5cd99f) return Math['round'](_0x111aa3 / _0x53729d) + _0x7fafe4(0x166); else { if (_0x111aa3 < _0x5e5679) return Math['round'](_0x111aa3 / _0x5cd99f) + _0x7fafe4(0x152); else { if (_0x111aa3 < _0x2e805c) return Math[_0x7fafe4(0x153)](_0x111aa3 / _0x5e5679) + _0x7fafe4(0x170); else return _0x111aa3 < _0x3c3d63 ? Math[_0x7fafe4(0x153)](_0x111aa3 / _0x2e805c) + _0x7fafe4(0x162) : Math[_0x7fafe4(0x153)](_0x111aa3 / _0x3c3d63) + _0x7fafe4(0x148); } } } } function left_box(_0x42ece7, _0x256491, _0x2b92d8) { var _0x546873 = _0x2cfe, _0x2d6dbe = timeDifference(_0x2b92d8); return '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<!--begin::Message\x20In-->\x0a\x09\x09\x09\x09<div\x20class=\x22d-flex\x20flex-column\x20mb-5\x20align-items-start\x22>\x0a\x09\x09\x09\x09\x09<div\x20class=\x22d-flex\x20align-items-center\x22>\x0a\x09\x09\x09\x09\x09\x09<div\x20class=\x22symbol\x20symbol-circle\x20symbol-50\x20mr-3\x20mt-2\x20\x20p-5\x20bg-success\x20text-white\x20font-weight-bold\x20font-size-lg\x20\x20\x22\x20style=\x27text-transform:\x20uppercase;\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20' + _0x42ece7[_0x546873(0x183)](0x0, 0x2) + '\x0a\x09\x09\x09\x09\x09\x09</div>\x0a\x09\x09\x09\x09\x09\x09<div>\x0a\x09\x09\x09\x09\x09\x09\x09<a\x20href=\x22#\x22\x20class=\x22text-dark-75\x20text-hover-primary\x20font-weight-bold\x20font-size-h6\x22>' + _0x42ece7 + _0x546873(0x16d) + _0x2d6dbe + _0x546873(0x190) + _0x256491 + _0x546873(0x16a); } function right_box(_0x57ff7a, _0x7d6ff1, _0x57cbce) { var _0x5aa08a = _0x2cfe, _0x47a223 = timeDifference(_0x57cbce); return _0x5aa08a(0x14d) + _0x57ff7a[_0x5aa08a(0x183)](0x0, 0x2) + _0x5aa08a(0x147) + _0x57ff7a + '</a>\x0a\x09\x09\x09\x09\x09\x09\x09<span\x20class=\x22text-muted\x20font-size-sm\x22>' + _0x47a223 + _0x5aa08a(0x190) + _0x7d6ff1 + '</div>\x0a\x09\x09\x09\x09</div>\x0a\x09\x09\x09\x09<!--end::Message\x20In-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'; } function change_user_chat(_0x1a6f60, _0x4959b1) { var _0x4f2784 = _0x2cfe; $('.' + _0x1a6f60 + _0x4f2784(0x174))[_0x4f2784(0x181)](_0x2ad4f5 => { var _0x5f12ad = _0x4f2784; current_chat[_0x5f12ad(0x18c)] = _0x2ad4f5, current_chat[_0x5f12ad(0x169)] = _0x2ad4f5[_0x5f12ad(0x176)][_0x5f12ad(0x177)](_0x5f12ad(0x156)), current_chat['course_id'] = _0x2ad4f5['currentTarget'][_0x5f12ad(0x177)](_0x5f12ad(0x143)), current_chat[_0x5f12ad(0x180)] = _0x2ad4f5['currentTarget']['getAttribute'](_0x5f12ad(0x189)), current_chat['user_name'] = _0x2ad4f5[_0x5f12ad(0x176)]['getAttribute']('data-user-name'), fetch_messages(_0x1a6f60, _0x4959b1), reset_clicked_user_notification(_0x1a6f60), get_notification(_0x1a6f60); }); } change_user_chat('group', _0x43727e(0x158)), change_user_chat(_0x43727e(0x15a), _0x43727e(0x15b)); function pageLoad(_0x52b38e, _0x2a475a) { var _0x42cc28 = _0x43727e; if ($('.' + _0x52b38e + _0x42cc28(0x174))[_0x42cc28(0x18e)] > 0x0) { var _0x3acf5a = $('.' + _0x52b38e + '_chat_user')[_0x42cc28(0x185)](0x0); current_chat['panel'] = _0x3acf5a, current_chat[_0x42cc28(0x169)] = _0x3acf5a[_0x42cc28(0x177)](_0x42cc28(0x156)), current_chat[_0x42cc28(0x17d)] = _0x3acf5a['getAttribute'](_0x42cc28(0x143)), current_chat[_0x42cc28(0x180)] = _0x3acf5a[_0x42cc28(0x177)](_0x42cc28(0x189)), current_chat[_0x42cc28(0x14b)] = _0x3acf5a[_0x42cc28(0x177)](_0x42cc28(0x163)), fetch_messages(_0x52b38e, _0x2a475a), get_notification(_0x52b38e); } } pageLoad(_0x43727e(0x17f), 'get_group_messages'), pageLoad(_0x43727e(0x15a), _0x43727e(0x15b)); function chat_textArea(_0x43bb6d) { var _0x942439 = _0x43727e; $('.' + _0x43bb6d + _0x942439(0x144))[_0x942439(0x141)](_0x942439(0x146)), $('.' + _0x43bb6d + _0x942439(0x144))[_0x942439(0x192)](_0x942439(0x150)), $('.' + _0x43bb6d + '_chat_textarea')['on'](_0x942439(0x18a), _0x42b7a5 => { var _0x5affc6 = _0x942439, _0x3f32aa = $('.' + _0x43bb6d + _0x5affc6(0x178))[_0x5affc6(0x191)](); current_chat[_0x5affc6(0x175)] = _0x3f32aa, _0x3f32aa[_0x5affc6(0x14e)]()[_0x5affc6(0x18e)] == 0x0 ? ($('.' + _0x43bb6d + _0x5affc6(0x144))['removeClass'](_0x5affc6(0x146)), $('.' + _0x43bb6d + '_chat_submit_button')[_0x5affc6(0x192)](_0x5affc6(0x150))) : ($('.' + _0x43bb6d + _0x5affc6(0x144))[_0x5affc6(0x141)]('btn-disable'), $('.' + _0x43bb6d + _0x5affc6(0x144))[_0x5affc6(0x192)](_0x5affc6(0x146))); }); } function _0x11af() { var _0x24f7a7 = ['get_group_messages', '9fiiUzC', 'private', 'get_private_messages', '19315eIvBOD', 'label-danger', 'includes', 'rest-chat-get', 'toLowerCase', '3024726QIGwwW', '\x20months\x20ago', 'data-user-name', 'href', '281230xhsGUt', '\x20minutes\x20ago', 'limit', 'get_', 'user_id', '</div>\x0a\x09\x09\x09\x09</div>\x0a\x09\x09\x09\x09<!--end::Message\x20In-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'append', 'reset_', '</a>\x0a\x09\x09\x09\x09\x09\x09\x09<span\x20class=\x22text-muted\x20font-size-sm\x22>', '_chat_time', 'student-chat-view', '\x20days\x20ago', 'text', 'lecturer-chat-view', '7RgVord', '_chat_user', 'message', 'currentTarget', 'getAttribute', '_chat_textarea', '_chat_messages_box', 'post', 'chat\x20notification\x20fetch\x20error', '_chat_notification', 'course_id', 'forEach', 'group', 'course_name', 'click', '116QnqSze', 'substring', '823848KBpTvi', 'get', 'html', 'reset\x20chat\x20notification\x20fetch\x20error', 'time', 'data-course', 'keyup\x20keydown\x20keypres', 'student-group-view', 'panel', '_notification', 'length', 'label-light-success', '</span>\x0a\x09\x09\x09\x09\x09\x09</div>\x0a\x09\x09\x09\x09\x09</div>\x0a\x09\x09\x09\x09\x09<div\x20class=\x22mt-2\x20rounded\x20p-5\x20bg-light-success\x20text-dark-50\x20font-weight-bold\x20font-size-lg\x20text-left\x20max-w-400px\x22>', 'val', 'addClass', 'parse', '17884191cQiplC', 'toString', 'removeClass', '121Wlidgf', 'data-id', '_chat_submit_button', '1JRJbeB', 'btn-primary', '\x0a\x09\x09\x09\x09\x09\x09</div>\x0a\x09\x09\x09\x09\x09\x09<div>\x0a\x09\x09\x09\x09\x09\x09\x09<a\x20href=\x22#\x22\x20class=\x22text-dark-75\x20text-hover-primary\x20font-weight-bold\x20font-size-h6\x22>', '\x20years\x20ago', 'lecturer-group-view', 'POST', 'user_name', 'attr', '\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<!--begin::Message\x20In-->\x0a\x09\x09\x09\x09<div\x20class=\x22d-flex\x20flex-column\x20mb-5\x20align-items-end\x22>\x0a\x09\x09\x09\x09\x09<div\x20class=\x22d-flex\x20align-items-center\x22>\x0a\x09\x09\x09\x09\x09\x09<div\x20class=\x22symbol\x20symbol-circle\x20symbol-50\x20mr-3\x20mt-2\x20\x20p-5\x20bg-success\x20text-white\x20font-weight-bold\x20font-size-lg\x20\x20\x22\x20\x20style=\x27text-transform:\x20uppercase;\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20', 'trim', 'log', 'btn-disable', '12amwjYX', '\x20hours\x20ago', 'round', '1687856RjKGCX', 'ajax', 'data-user-id', '1345992HTOJdL']; _0x11af = function () { return _0x24f7a7; }; return _0x11af(); } chat_textArea(_0x43727e(0x17f)), chat_textArea(_0x43727e(0x15a)), 0xd; function send_message(_0x5d0e07, _0x3512c8, _0x1e0b58) { var _0x1bfa9f = _0x43727e; $('.' + _0x5d0e07 + _0x1bfa9f(0x144))[_0x1bfa9f(0x181)](_0x3101b0 => { var _0x3dbbd0 = _0x1bfa9f, _0x33140d = window['location'][_0x3dbbd0(0x164)][_0x3dbbd0(0x160)](); if (_0x33140d[_0x3dbbd0(0x15e)](_0x3512c8)) { var _0x3aa214 = $('.' + _0x5d0e07 + _0x3dbbd0(0x178))['val'](); if (_0x3aa214['trim']()[_0x3dbbd0(0x18e)] == 0x0) return ![]; $('.' + _0x5d0e07 + '_chat_textarea')['val'](''), $('.' + _0x5d0e07 + _0x3dbbd0(0x144))[_0x3dbbd0(0x141)](_0x3dbbd0(0x146)), $('.' + _0x5d0e07 + _0x3dbbd0(0x144))[_0x3dbbd0(0x192)]('btn-disable'), $[_0x3dbbd0(0x17a)](_0x3512c8, { 'user_name': current_chat['user_name'], 'course_id': current_chat[_0x3dbbd0(0x17d)], 'user_id': current_chat[_0x3dbbd0(0x169)], 'time': new Date()[_0x3dbbd0(0x140)](), 'message': _0x3aa214 }, (_0x308785, _0x1694f5) => { var _0x4dc7cf = _0x3dbbd0; console[_0x4dc7cf(0x14f)](_0x1694f5), fetch_messages(_0x5d0e07, _0x1e0b58), get_notification(_0x5d0e07); }); } }); } send_message('group', _0x43727e(0x18b), _0x43727e(0x158)), send_message(_0x43727e(0x15a), _0x43727e(0x16f), _0x43727e(0x15b)), send_message(_0x43727e(0x17f), _0x43727e(0x149), _0x43727e(0x158)), send_message(_0x43727e(0x15a), _0x43727e(0x172), _0x43727e(0x15b)); function update_pooling_chat(_0x19ce43, _0x36e5b4, _0x2f1647 = 0xfa0) { $('.' + _0x19ce43 + '_chat_user')['length'] > 0x0 && setInterval(() => { get_notification(_0x19ce43), fetch_messages(_0x19ce43, _0x36e5b4); }, _0x2f1647); } update_pooling_chat(_0x43727e(0x17f), _0x43727e(0x158)), update_pooling_chat('private', _0x43727e(0x15b));